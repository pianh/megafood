"use strict";(self.webpackChunkMailPoet3=self.webpackChunkMailPoet3||[]).push([[392],{2167:function(e,t,o){var s=o(65443),a=o.n(s),r=o(64151),i=o(33851),n=o(52278),l=o(3610),c=o(90057),d=o(87834),p=o(49231),m=o(33140),u=(0,p.createElement)(m.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"-2 -2 24 24"},(0,p.createElement)(m.y$,{d:"M20 10c0-5.51-4.49-10-10-10C4.48 0 0 4.49 0 10c0 5.52 4.48 10 10 10 5.51 0 10-4.48 10-10zM7.78 15.37L4.37 6.22c.55-.02 1.17-.08 1.17-.08.5-.06.44-1.13-.06-1.11 0 0-1.45.11-2.37.11-.18 0-.37 0-.58-.01C4.12 2.69 6.87 1.11 10 1.11c2.33 0 4.45.87 6.05 2.34-.68-.11-1.65.39-1.65 1.58 0 .74.45 1.36.9 2.1.35.61.55 1.36.55 2.46 0 1.49-1.4 5-1.4 5l-3.03-8.37c.54-.02.82-.17.82-.17.5-.05.44-1.25-.06-1.22 0 0-1.44.12-2.38.12-.87 0-2.33-.12-2.33-.12-.5-.03-.56 1.2-.06 1.22l.92.08 1.26 3.41zM17.41 10c.24-.64.74-1.87.43-4.25.7 1.29 1.05 2.71 1.05 4.25 0 3.29-1.73 6.24-4.4 7.78.97-2.59 1.94-5.2 2.92-7.78zM6.1 18.09C3.12 16.65 1.11 13.53 1.11 10c0-1.3.23-2.48.72-3.59C3.25 10.3 4.67 14.2 6.1 18.09zm4.03-6.63l2.58 6.98c-.86.29-1.76.45-2.71.45-.79 0-1.57-.11-2.29-.33.81-2.38 1.62-4.74 2.42-7.1z"})),h=o(98005),g=o(353),x=o(95393),v=o(67911),b=o(54600),f=o(85479),_=o(30337),j=o(17921),w=o(14676),k=o(34380),y=o(82435),N=o(76767),S=o(41325),Z=o(20264);const C=j.Z;function D(e){let{children:t}=e;const{workflowName:o,workflowStatus:s,showIconLabels:a}=(0,d.Z)((e=>({workflowName:e(N.storeName).getWorkflowData().name,workflowStatus:e(N.storeName).getWorkflowData().status,showIconLabels:e(N.storeName).isFeatureActive("showIconLabels")})),[]),r=(0,p.useRef)();let i="mailpoet-automation-editor-chip-gray";return s===S.x.ACTIVE?i="mailpoet-automation-editor-chip-success":s===S.x.INACTIVE&&(i="mailpoet-automation-editor-chip-danger"),(0,Z.jsx)("div",{className:"edit-site-document-actions has-secondary-label",children:(0,Z.jsx)("div",{ref:r,className:"edit-site-document-actions__title-wrapper",children:t&&(0,Z.jsx)(C,{popoverProps:{anchorRef:r.current},position:"bottom center",renderToggle:e=>{let{isOpen:t,onToggle:r}=e;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)("a",{className:"mailpoet-automation-editor-dropdown-toggle-link",href:"#",onClick:r,children:[(0,Z.jsxs)(w.Z,{size:"body",className:"edit-site-document-actions__title",as:"h1",children:[(0,Z.jsx)(k.Z,{as:"span",children:(0,_.__)("Editing workflow: ")}),o]}),(0,Z.jsxs)(w.Z,{size:"body",className:`edit-site-document-actions__secondary-item ${i}`,children:[s===S.x.ACTIVE&&(0,_.__)("Active"),s===S.x.INACTIVE&&(0,_.__)("Inactive"),s===S.x.DRAFT&&(0,_.__)("Draft")]})]}),(0,Z.jsx)(n.Z,{className:"edit-site-document-actions__get-info",icon:y.Z,"aria-expanded":t,"aria-haspopup":"true",onClick:r,label:(0,_.__)("Change workflow name"),children:a&&(0,_.__)("Rename")})]})},contentClassName:"edit-site-document-actions__info-dropdown",renderContent:t})})})}var A=o(9487),I=o(96097);function T(){const{isInserterOpened:e,showIconLabels:t}=(0,d.Z)((e=>({isInserterOpened:e(N.storeName).isInserterSidebarOpened(),showIconLabels:e(N.storeName).isFeatureActive("showIconLabels")})),[]),{toggleInserterSidebar:o}=(0,f.Z)(N.storeName);return(0,Z.jsx)(A.Z,{as:n.Z,className:"edit-site-header-toolbar__inserter-toggle",variant:"primary",isPressed:e,onMouseDown:e=>e.preventDefault(),onClick:o,icon:I.Z,label:(0,_._x)("Toggle step inserter","Generic label for step inserter button"),showTooltip:!t,children:t&&(e?(0,_.__)("Close"):(0,_.__)("Add"))})}var E=o(53703),F=o(83830),M=o(73435),L=o(62271),R=o(45538),P=o(21602);function W(e){let{scope:t,name:o,label:s,info:a,messageActivated:r,messageDeactivated:i,shortcut:n}=e;const l=(0,d.Z)((e=>!!e(P.h).get(t,o)),[o]),{toggle:c}=(0,f.Z)(P.h);return(0,p.createElement)(M.Z,{icon:l&&L.Z,isSelected:l,onClick:()=>{c(t,o),(()=>{if(l){const e=i||(0,_.sprintf)((0,_.__)("Preference deactivated - %s"),s);(0,R.D)(e)}else{const e=r||(0,_.sprintf)((0,_.__)("Preference activated - %s"),s);(0,R.D)(e)}})()},role:"menuitemcheckbox",info:a,shortcut:n},s)}function H(){return(0,Z.jsx)(h.Eo,{className:"edit-site-more-menu",popoverProps:{className:"edit-site-more-menu__content"},children:()=>(0,Z.jsx)(E.Z,{label:(0,_._x)("View","noun"),children:(0,Z.jsx)(W,{scope:N.storeName,name:"fullscreenMode",label:(0,_.__)("Fullscreen mode"),info:(0,_.__)("Work without distraction"),messageActivated:(0,_.__)("Fullscreen mode activated"),messageDeactivated:(0,_.__)("Fullscreen mode deactivated"),shortcut:F.displayShortcut.secondary("f")})})})}function O(){const{activate:e}=(0,f.Z)(N.storeName);return(0,Z.jsx)(n.Z,{isPrimary:!0,className:"editor-post-publish-button",onClick:e,children:"Activate"})}function K(){const{activate:e}=(0,f.Z)(N.storeName);return(0,Z.jsx)(n.Z,{isPrimary:!0,className:"editor-post-publish-button",onClick:e,children:"Update"})}function V(){const{save:e}=(0,f.Z)(N.storeName);return(0,Z.jsx)(n.Z,{isTertiary:!0,onClick:e,children:(0,_.__)("Save Draft")})}function z(e){let{showInserterToggle:t}=e;const{setWorkflowName:o}=(0,f.Z)(N.storeName),{workflowName:s,workflowStatus:a}=(0,d.Z)((e=>({workflowName:e(N.storeName).getWorkflowData().name,workflowStatus:e(N.storeName).getWorkflowData().status})),[]);return(0,Z.jsxs)("div",{className:"edit-site-header",children:[(0,Z.jsx)("div",{className:"edit-site-header_start",children:(0,Z.jsx)(v.Z,{className:"edit-site-header__toolbar",orientation:"horizontal",role:"toolbar",children:t&&(0,Z.jsx)(T,{})})}),(0,Z.jsx)("div",{className:"edit-site-header_center",children:(0,Z.jsx)(D,{children:()=>(0,Z.jsxs)("div",{className:"mailpoet-automation-editor-dropdown-name-edit",children:[(0,Z.jsx)("div",{className:"mailpoet-automation-editor-dropdown-name-edit-title",children:(0,_.__)("Automation name")}),(0,Z.jsx)(b.Z,{value:s,onChange:e=>o(e),help:(0,_.__)('Give the automation a name that indicates its purpose. E.g. "Abandoned cart recovery"')})]})})}),(0,Z.jsx)("div",{className:"edit-site-header_end",children:(0,Z.jsxs)("div",{className:"edit-site-header__actions",children:[(0,Z.jsx)(V,{}),a!==S.x.ACTIVE&&(0,Z.jsx)(O,{}),a===S.x.ACTIVE&&(0,Z.jsx)(K,{}),(0,Z.jsx)(h.Ox.Slot,{scope:N.storeName}),(0,Z.jsx)(H,{})]})})]})}var $=o(2637),B=o(47842),U=o(1779);function G(e){let{icon:t}=e;return(0,Z.jsx)("span",{className:"block-editor-block-icon",children:(0,Z.jsx)(l.Z,{icon:t})})}function Y(e){let{item:t}=e;const{title:o,icon:s,description:a}=t;return(0,Z.jsx)("div",{className:"block-editor-inserter__preview-container",children:(0,Z.jsxs)("div",{className:"block-editor-block-card",children:[(0,Z.jsx)(G,{icon:s}),(0,Z.jsxs)("div",{className:"block-editor-block-card__content",children:[(0,Z.jsx)("h2",{className:"block-editor-block-card__title",children:o}),(0,Z.jsx)("span",{className:"block-editor-block-card__description",children:a})]})]})})}var q=o(88565);const J=(0,p.createContext)(void 0),Q=(0,p.forwardRef)(((e,t)=>{let{isFirst:o,children:s,...a}=e;const r=(0,p.useContext)(J);return(0,Z.jsx)(q.A,{ref:t,state:r,role:"option",focusable:!0,...a,children:e=>{const t={...e,tabIndex:o?0:e.tabIndex};return(0,Z.jsx)(n.Z,{...t,children:s})}})})),X=()=>{const{platform:e}=window.navigator;return-1!==e.indexOf("Mac")||["iPad","iPhone"].includes(e)},ee=(0,p.memo)((e=>{let{className:t,isFirst:o,item:s,onSelect:r,onHover:i,isDraggable:n,...l}=e;const c=(0,p.useRef)(!1);return(0,Z.jsx)("div",{className:"block-editor-block-types-list__list-item",children:(0,Z.jsxs)(Q,{isFirst:o,className:a()("block-editor-block-types-list__item",t),disabled:s.isDisabled,onClick:e=>{e.preventDefault(),r(s,X()?e.metaKey:e.ctrlKey),i(null)},onKeyDown:e=>{const{keyCode:t}=e;t===F.ENTER&&(e.preventDefault(),r(s,X()?e.metaKey:e.ctrlKey),i(null))},onFocus:()=>{c.current||i(s)},onMouseEnter:()=>{c.current||i(s)},onMouseLeave:()=>i(null),onBlur:()=>i(null),...l,children:[(0,Z.jsx)("span",{className:"block-editor-block-types-list__item-icon",children:(0,Z.jsx)(G,{icon:s.icon})}),(0,Z.jsx)("span",{className:"block-editor-block-types-list__item-title",children:s.title})]})})})),te=(0,p.forwardRef)(((e,t)=>{const[o,s]=(0,p.useState)(!1);return(0,p.useEffect)((()=>{o&&(0,R.D)((0,_.__)("Use left and right arrow keys to move through blocks"))}),[o]),(0,Z.jsx)("div",{ref:t,role:"listbox","aria-orientation":"horizontal",onFocus:()=>{s(!0)},onBlur:e=>{!e.currentTarget.contains(e.relatedTarget)&&s(!1)},...e})}));var oe=o(17750);const se=(0,p.forwardRef)(((e,t)=>{const o=(0,p.useContext)(J);return(0,Z.jsx)(oe.E,{state:o,role:"presentation",ref:t,...e})})),ae=(e,t)=>{const o=[];for(let s=0,a=e.length;s<a;s+=t)o.push(e.slice(s,s+t));return o};function re(e){let{items:t,onSelect:o,onHover:s,label:a,isDraggable:r=!0,children:i}=e;return(0,Z.jsxs)(te,{className:"block-editor-block-types-list","aria-label":a,children:[ae(t,3).map(((e,t)=>(0,Z.jsx)(se,{children:e.map(((e,a)=>{return(0,Z.jsx)(ee,{item:e,className:(i=e.key,`editor-block-list-item-${i.replace(/\//,"-")}`),onSelect:o,onHover:s,isDraggable:r,isFirst:0===t&&0===a},e.key);var i}))},t))),i]})}var ie=o(15596);function ne(e){let{children:t}=e;const o=(0,ie.u)({shift:!0,wrap:"horizontal"});return(0,Z.jsx)(J.Provider,{value:o,children:t})}const le=(0,p.forwardRef)(((e,t)=>{let{onInsert:o}=e;const[s,a]=(0,p.useState)(""),[r,i]=(0,p.useState)(null),{steps:n,type:l}=(0,d.Z)((e=>({steps:e(N.storeName).getSteps(),type:e(N.storeName).getInserterPopover().type})),[]),c=(0,p.useMemo)((()=>"triggers"===l?[{type:"triggers",title:void 0,label:(0,_.__)("Triggers","mailpoet"),items:n.filter((e=>{let{group:t}=e;return"triggers"===t}))}]:[{type:"actions",title:(0,_.__)("Actions","mailpoet"),label:(0,_.__)("Actions","mailpoet"),items:n.filter((e=>{let{group:t}=e;return"actions"===t}))},{type:"logical",title:(0,_.__)("Logical","mailpoet"),label:(0,_.__)("Logical","mailpoet"),items:n.filter((e=>{let{group:t}=e;return"logical"===t}))}]),[n,l]),m=(0,p.useCallback)((e=>{i(e)}),[i]),u=(0,p.useRef)();(0,p.useImperativeHandle)(t,(()=>({focusSearch:()=>{var e;null===(e=u.current)||void 0===e||e.focus()}})));const h=(0,p.useMemo)((()=>c.map((e=>{return{...e,items:(t=s,o=e.items,o.filter((e=>e.title.toLowerCase().includes(t.trim().toLowerCase()))))};var t,o}))),[s,c]);return(0,Z.jsxs)("div",{className:"block-editor-inserter__menu",children:[(0,Z.jsx)("div",{className:"block-editor-inserter__main-area",children:(0,Z.jsxs)("div",{className:"block-editor-inserter__content",children:[(0,Z.jsx)($.Z,{className:"block-editor-inserter__search",onChange:e=>{r&&i(null),a(e)},value:s,label:(0,_.__)("Search for blocks and patterns"),placeholder:(0,_.__)("Search"),ref:u}),(0,Z.jsx)("div",{className:"block-editor-inserter__block-list",children:(0,Z.jsxs)(ne,{children:[h.map((e=>e.items.length>0&&(0,Z.jsxs)(p.Fragment,{children:[e.title&&(0,Z.jsx)("div",{className:"block-editor-inserter__panel-header",children:(0,Z.jsx)("h2",{className:"block-editor-inserter__panel-title",children:(0,Z.jsx)("div",{children:e.title})})}),(0,Z.jsx)("div",{className:"block-editor-inserter__panel-content",children:(0,Z.jsx)(re,{items:e.items,onHover:m,onSelect:e=>o(e),label:e.label})})]},e.type))),0===h.reduce(((e,t)=>{let{items:o}=t;return e+o.length}),0)&&(0,Z.jsxs)("div",{className:"block-editor-inserter__no-results",children:[(0,Z.jsx)(B.Z,{className:"block-editor-inserter__no-results-icon",icon:U.Z}),(0,Z.jsx)("p",{children:(0,_.__)("No results found.")})]})]})})]})}),r&&(0,Z.jsx)(Y,{item:r})]})}));function ce(){const{isSidebarOpened:e,selectedStep:t}=(0,d.Z)((e=>({isSidebarOpened:e(N.storeName).isSidebarOpened,selectedStep:e(N.storeName).getSelectedStep}))),{openSidebar:o,closeSidebar:s,toggleFeature:a}=(0,f.Z)(N.storeName),{registerShortcut:r}=(0,f.Z)(g.h);return(0,p.useEffect)((()=>{r({name:"mailpoet/automation-editor/toggle-fullscreen",category:"global",description:(0,_.__)("Toggle fullscreen mode."),keyCombination:{modifier:"secondary",character:"f"}}),r({name:"mailpoet/automation-editor/toggle-sidebar",category:"global",description:(0,_.__)("Show or hide the settings sidebar."),keyCombination:{modifier:"primaryShift",character:","}})}),[r]),(0,g.bx)("mailpoet/automation-editor/toggle-fullscreen",(()=>{a("fullscreenMode")})),(0,g.bx)("mailpoet/automation-editor/toggle-sidebar",(a=>{if(a.preventDefault(),e())s();else{const e=t()?N.stepSidebarKey:N.workflowSidebarKey;o(e)}})),null}var de=o(81535),pe=o(24683),me=o(18439);function ue(){const{notices:e}=(0,d.Z)((e=>({notices:e(me.h).getNotices()})),[]),{removeNotice:t}=(0,f.Z)(me.h),o=e.filter((e=>{let{isDismissible:t,type:o}=e;return t&&"default"===o})),s=e.filter((e=>{let{isDismissible:t,type:o}=e;return!t&&"default"===o})),a=e.filter((e=>{let{type:t}=e;return"snackbar"===t}));return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(de.Z,{notices:s,className:"mailpoet-automation-editor-notices__notice-list"}),(0,Z.jsx)(de.Z,{notices:o,className:"mailpoet-automation-editor-notices__notice-list",onRemove:t}),(0,Z.jsx)(pe.Z,{notices:a,className:"mailpoet-automation-editor-notices__snackbar-list",onRemove:t})]})}var he=o(12518),ge=(0,p.createElement)(m.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(m.y$,{fillRule:"evenodd",d:"M10.289 4.836A1 1 0 0111.275 4h1.306a1 1 0 01.987.836l.244 1.466c.787.26 1.503.679 2.108 1.218l1.393-.522a1 1 0 011.216.437l.653 1.13a1 1 0 01-.23 1.273l-1.148.944a6.025 6.025 0 010 2.435l1.149.946a1 1 0 01.23 1.272l-.653 1.13a1 1 0 01-1.216.437l-1.394-.522c-.605.54-1.32.958-2.108 1.218l-.244 1.466a1 1 0 01-.987.836h-1.306a1 1 0 01-.986-.836l-.244-1.466a5.995 5.995 0 01-2.108-1.218l-1.394.522a1 1 0 01-1.217-.436l-.653-1.131a1 1 0 01.23-1.272l1.149-.946a6.026 6.026 0 010-2.435l-1.148-.944a1 1 0 01-.23-1.272l.653-1.131a1 1 0 011.217-.437l1.393.522a5.994 5.994 0 012.108-1.218l.244-1.466zM14.929 12a3 3 0 11-6 0 3 3 0 016 0z",clipRule:"evenodd"}));function xe(e){let{sidebarKey:t}=e;const{openSidebar:o}=(0,f.Z)(N.storeName),[s,a]=t===N.workflowSidebarKey?["Workflow (selected)","is-active"]:["Workflow",""],[r,i]=t===N.stepSidebarKey?["Step (selected)","is-active"]:["Step",""];return(0,Z.jsxs)("ul",{children:[(0,Z.jsx)("li",{children:(0,Z.jsx)(n.Z,{onClick:()=>o(N.workflowSidebarKey),className:`edit-site-sidebar__panel-tab ${a}`,"aria-label":s,"data-label":"Workflow",children:"Workflow"})}),(0,Z.jsx)("li",{children:(0,Z.jsx)(n.Z,{onClick:()=>o(N.stepSidebarKey),className:`edit-site-sidebar__panel-tab ${i}`,"aria-label":r,"data-label":"Workflow",children:"Step"})})]})}var ve=o(21840);function be(e){let{title:t,description:o,icon:s}=e;return(0,Z.jsxs)("div",{className:"block-editor-block-card",children:[(0,Z.jsx)(G,{icon:s}),(0,Z.jsxs)("div",{className:"block-editor-block-card__content",children:[(0,Z.jsx)("h2",{className:"block-editor-block-card__title",children:t}),(0,Z.jsx)("span",{className:"block-editor-block-card__description",children:o})]})]})}function fe(){const{selectedStep:e,selectedStepType:t}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep(),selectedStepType:e(N.storeName).getSelectedStepType()})),[]);if(!e)return(0,Z.jsx)(ve.Z,{children:"No step selected."});if(!t)return(0,Z.jsx)(ve.Z,{children:"Unknown step type."});const o=t.edit;return(0,Z.jsxs)("div",{className:"block-editor-block-inspector",children:[(0,Z.jsx)(be,{title:t.title,description:t.description,icon:t.icon}),(0,Z.jsx)(o,{}),(0,Z.jsxs)(ve.Z,{title:"Debug info",initialOpen:!1,children:[(0,Z.jsxs)("div",{children:[(0,Z.jsx)("strong",{children:"ID:"})," ",e.id]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("strong",{children:"Type:"})," ",e.type]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("strong",{children:"Key:"})," ",e.key]}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("strong",{children:"Args:"})," ",JSON.stringify(e.args)]})]})]})}var _e=o(11345),je=o(8363);function we(){const[e,t]=(0,p.useState)(!1),{workflow:o}=(0,d.Z)((e=>({workflow:e(N.storeName).getWorkflowData()})),[]),{trash:s}=(0,f.Z)(N.storeName);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsxs)(je.Z,{isOpen:e,title:"Delete workflow",confirmButtonText:"Yes, delete",onConfirm:async()=>{s((()=>{t(!1)}))},onCancel:()=>t(!1),__experimentalHideHeader:!1,children:["You are about to delete the “",o.name,"” workflow."]}),(0,Z.jsx)(n.Z,{isSecondary:!0,isDestructive:!0,onClick:()=>t(!0),children:"Move to Trash"})]})}function ke(){const{workflowData:e}=(0,d.Z)((e=>({workflowData:e(N.storeName).getWorkflowData()})),[]),t={year:"numeric",month:"long",day:"numeric"};return(0,Z.jsxs)(ve.Z,{title:"Automation details",initialOpen:!0,children:[(0,Z.jsxs)(_e.Z,{children:[(0,Z.jsx)("strong",{children:"Date added"})," ",new Date(Date.parse(e.created_at)).toLocaleDateString(void 0,t)]}),(0,Z.jsxs)(_e.Z,{children:[(0,Z.jsx)("strong",{children:"Activated"})," ","active"===e.status&&new Date(Date.parse(e.updated_at)).toLocaleDateString(void 0,t),"active"!==e.status&&e.activated_at&&new Date(Date.parse(e.activated_at)).toLocaleDateString(void 0,t),"active"!==e.status&&!e.activated_at&&(0,Z.jsx)("span",{className:"mailpoet-deactive",children:"Not activated yet."})]}),(0,Z.jsxs)(_e.Z,{children:[(0,Z.jsx)("strong",{children:"Author"})," ",e.author.name]}),(0,Z.jsx)(_e.Z,{children:(0,Z.jsx)(we,{})})]})}const ye=he.Z.select({web:!0,native:!1});function Ne(e){const{keyboardShortcut:t,sidebarKey:o,showIconLabels:s,workflowName:a}=(0,d.Z)((e=>({keyboardShortcut:e(g.h).getShortcutRepresentation("mailpoet/automation-editor/toggle-sidebar"),sidebarKey:e(h.h).getActiveComplementaryArea(N.storeName)??N.workflowSidebarKey,showIconLabels:e(N.storeName).isFeatureActive("showIconLabels"),workflowName:e(N.storeName).getWorkflowData().name})),[]);return(0,Z.jsxs)(h.Vi,{identifier:o,header:(0,Z.jsx)(xe,{sidebarKey:o}),closeLabel:(0,_.__)("Close settings"),headerClassName:"edit-site-sidebar__panel-tabs",title:(0,_.__)("Settings"),icon:ge,className:"edit-site-sidebar mailpoet-automation-sidebar",panelClassName:"edit-site-sidebar",smallScreenTitle:a||(0,_.__)("(no title)"),scope:N.storeName,toggleShortcut:t,isActiveByDefault:ye,showIconLabels:s,...e,children:[o===N.workflowSidebarKey&&(0,Z.jsx)(ke,{}),o===N.stepSidebarKey&&(0,Z.jsx)(fe,{})]})}var Se=o(73763),Ze=o(34517);const Ce=(0,p.createContext)(void 0);function De(){return(0,Z.jsx)("div",{className:"mailpoet-automation-editor-empty-workflow",children:"No workflow data."})}var Ae=o(38104);function Ie(e){let{onClick:t,previousStepId:o}=e;const s=(0,p.useContext)(Ce);return(0,Z.jsx)(q.A,{state:s,role:"treeitem",className:"mailpoet-automation-editor-add-step-button",focusable:!0,"data-previous-step-id":o,onClick:e=>{e.stopPropagation();const o=e.target.closest("button");t(o)},children:(0,Z.jsx)(B.Z,{icon:I.Z,size:16})})}function Te(e){let{previousStepId:t}=e;const{setInserterPopover:o}=(0,Ae.dispatch)(N.storeName);return(0,Z.jsx)("div",{className:"mailpoet-automation-editor-separator",children:(0,Z.jsx)(Ie,{onClick:e=>o({anchor:e,type:"steps"}),previousStepId:t})})}var Ee=o(78869),Fe=(0,p.createElement)(m.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(m.y$,{fillRule:"evenodd",d:"M8.95 11.25H4v1.5h4.95v4.5H13V18c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2v-3c0-1.1-.9-2-2-2h-3c-1.1 0-2 .9-2 2v.75h-2.55v-7.5H13V9c0 1.1.9 2 2 2h3c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2h-3c-1.1 0-2 .9-2 2v.75H8.95v4.5ZM14.5 15v3c0 .3.2.5.5.5h3c.3 0 .5-.2.5-.5v-3c0-.3-.2-.5-.5-.5h-3c-.3 0-.5.2-.5.5Zm0-6V6c0-.3.2-.5.5-.5h3c.3 0 .5.2.5.5v3c0 .3-.2.5-.5.5h-3c-.3 0-.5-.2-.5-.5Z",clipRule:"evenodd"})),Me=o(83115),Le=o(62006),Re=(0,p.createElement)(m.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(m.y$,{d:"M20 5h-5.7c0-1.3-1-2.3-2.3-2.3S9.7 3.7 9.7 5H4v2h1.5v.3l1.7 11.1c.1 1 1 1.7 2 1.7h5.7c1 0 1.8-.7 2-1.7l1.7-11.1V7H20V5zm-3.2 2l-1.7 11.1c0 .1-.1.2-.3.2H9.1c-.1 0-.3-.1-.3-.2L7.2 7h9.6z"})),Pe=o(33357);function We(e){let{step:t}=e;const[o,s]=(0,p.useState)(!1),a=(0,p.useCallback)((e=>{Ze.Hooks.applyFilters("mailpoet.automation.workflow.delete_step_callback",(()=>{s(!0)}))(e)}),[]);return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)("div",{className:"mailpoet-automation-step-more-menu",children:(0,Z.jsx)(Me.Z,{label:(0,_.__)("More","mailpoet"),icon:Le.Z,controls:[{title:(0,_.__)("Delete step","mailpoet"),icon:Re,onClick:()=>a(t)}],popoverProps:{position:"bottom right"},toggleProps:{isSmall:!0}})}),o&&(0,Z.jsx)(Pe.Z,{onRequestClose:()=>{s(!1)},tracking:{utm_medium:"upsell_modal",utm_campaign:"remove_automation_step"},children:(0,_.__)("You cannot remove a new step from the automation.","mailpoet")})]})}function He(e){let{foreground:t,background:o,...s}=e;return(0,Z.jsx)("div",{className:"mailpoet-automation-colored-icon",style:{width:s.width,height:s.height,backgroundColor:o,fill:t},children:(0,Z.jsx)(l.Z,{...s})})}function Oe(e){let{step:t,isSelected:o}=e;const{stepType:s}=(0,d.Z)((e=>({stepType:e(N.storeName).getStepType(t.key)})),[t]),{openSidebar:r,selectStep:i}=(0,f.Z)(N.storeName),n=(0,p.useContext)(Ce),{batch:l}=(0,Ee.Z)(),c=s??(e=>{const t="trigger"===e.type;return{title:t?(0,_.__)("Unknown trigger","mailpoet"):(0,_.__)("Unknown step","mailpoet"),subtitle:()=>t?(0,_.__)("Trigger type not registered","mailpoet"):(0,_.__)("Step type not registered","mailpoet"),description:t?(0,_.__)("Unknown trigger","mailpoet"):(0,_.__)("Unknown step","mailpoet"),group:"trigger"===e.type?"triggers":"actions",key:e.key,foreground:"#8c8f94",background:"#dcdcde",edit:()=>null,icon:()=>Fe}})(t);return(0,Z.jsxs)("div",{className:"mailpoet-automation-editor-step-wrapper",children:[(0,Z.jsx)(We,{step:t}),(0,Z.jsxs)(q.A,{state:n,role:"treeitem",className:a()({"mailpoet-automation-editor-step":!0,"is-selected-step":o,"is-unknown-step":!s}),focusable:!0,onClick:()=>l((()=>{r(N.stepSidebarKey),i(t)})),children:[(0,Z.jsx)("div",{className:"mailpoet-automation-editor-step-icon",children:(0,Z.jsx)(He,{icon:c.icon,foreground:c.foreground,background:c.background,width:"23px",height:"23px"})}),(0,Z.jsxs)("div",{children:[(0,Z.jsx)("div",{className:"mailpoet-automation-editor-step-title",children:c.title}),(0,Z.jsx)("div",{className:"mailpoet-automation-editor-step-subtitle",children:c.subtitle(t)})]})]},t.id)]})}function Ke(){const e=(0,p.useRef)(),[t,o]=(0,p.useState)(!1),{inserterPopover:s}=(0,d.Z)((e=>({inserterPopover:e(N.storeName).getInserterPopover()})),[]),{setInserterPopover:a}=(0,f.Z)(N.storeName),r=(0,p.useCallback)((e=>{Ze.Hooks.applyFilters("mailpoet.automation.workflow.add_step_callback",(()=>{o(!0)}))(e)}),[]);return s?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(c.Z,{ref:e,anchorRect:s.anchor.getBoundingClientRect(),onClose:()=>{t||a(void 0)},children:(0,Z.jsx)(le,{onInsert:r})}),t&&(0,Z.jsx)(Pe.Z,{onRequestClose:()=>{var t;o(!1),null===(t=e.current)||void 0===t||t.focus()},tracking:{utm_medium:"upsell_modal",utm_campaign:"add_automation_step"},children:(0,_.__)("You cannot add a new step to the automation.","mailpoet")})]}):null}function Ve(e){let{step:t}=e;const o=(0,p.useContext)(Ce),{setInserterPopover:s}=(0,f.Z)(N.storeName);return(0,Z.jsxs)(q.A,{state:o,role:"treeitem",className:"mailpoet-automation-workflow-add-trigger","data-previous-step-id":t.id,focusable:!0,onClick:e=>{e.stopPropagation(),s({anchor:e.target.closest("button"),type:"triggers"})},children:[(0,Z.jsx)(B.Z,{icon:I.Z,size:16}),(0,_.__)("Add trigger","mailpoet")]})}function ze(){const{workflowData:e,selectedStep:t}=(0,d.Z)((e=>({workflowData:e(N.storeName).getWorkflowData(),selectedStep:e(N.storeName).getSelectedStep()})),[]),o=(0,ie.u)({orientation:"vertical",wrap:"horizontal",shift:!0}),s=(null==e?void 0:e.steps)??void 0,a=(0,p.useMemo)((()=>{const e=[s.root];for(;;){const t=e[e.length-1];if(!t||0===t.next_steps.length)break;e.push(s[t.next_steps[0].id])}return e.slice(1)}),[s]),r=(0,p.useMemo)((()=>Ze.Hooks.applyFilters("mailpoet.automation.workflow.render_step",(e=>"root"===e.type?(0,Z.jsx)(Ve,{step:e}):(0,Z.jsx)(Oe,{step:e,isSelected:t&&e.id===t.id})))),[t]),i=(0,p.useMemo)((()=>Ze.Hooks.applyFilters("mailpoet.automation.workflow.render_step_separator",(e=>(0,Z.jsx)(Te,{previousStepId:e.id})))),[]);return e?(0,Z.jsx)(Ce.Provider,{value:o,children:(0,Z.jsxs)(Se.b,{state:o,role:"tree","aria-orientation":"vertical",className:"mailpoet-automation-editor-workflow",children:[(0,Z.jsxs)("div",{className:"mailpoet-automation-editor-workflow-wrapper",children:[(0,Z.jsx)("div",{}),0===s.root.next_steps.length?(0,Z.jsxs)(Z.Fragment,{children:[r(s.root),i(s.root)]}):s.root.next_steps.map((e=>{var t;let{id:o}=e;return"trigger"!==(null===(t=s[o])||void 0===t?void 0:t.type)&&(0,Z.jsxs)(p.Fragment,{children:[r(s.root),i(s.root)]},`root-${o}`)})),a.map((e=>(0,Z.jsxs)(p.Fragment,{children:[r(e),i(e)]},e.id))),(0,Z.jsx)(B.Z,{className:"mailpoet-automation-editor-workflow-end",icon:L.Z}),(0,Z.jsx)("div",{})]}),(0,Z.jsx)(Ke,{})]})}):(0,Z.jsx)(De,{})}var $e=o(93702),Be=o(9090),Ue=o(6258),Ge=o(97873);function Ye(e){let{title:t,children:o}=e;return(0,Z.jsxs)("h2",{className:"components-panel__body-title mailpoet-automation-panel-plain-body-title",children:[(0,Z.jsx)("div",{className:"mailpoet-automation-panel-plain-body-title-text",children:t}),o]})}function qe(e){return(0,Z.jsx)("div",{className:"mailpoet-automation-panel-plain-body-title-action",children:(0,Z.jsx)(n.Z,{...e})})}const Je=[{label:"Hours",subtitle:e=>`Wait for ${e} ${1===e?"hour":"hours"}`,value:"HOURS"},{label:"Days",subtitle:e=>`Wait for ${e} ${1===e?"day":"days"}`,value:"DAYS"},{label:"Weeks",subtitle:e=>`Wait for ${e} ${1===e?"week":"weeks"}`,value:"WEEKS"}],Qe={key:"core:delay",group:"actions",title:"Delay",foreground:"#7F54B3",background:"#f7edf7",description:"Wait some time before proceeding with the steps below",subtitle:e=>{return e.args.delay&&e.args.delay_type?(t=e.args.delay_type,o=e.args.delay,Je.reduce(((e,s)=>s.value!==t?e:s.subtitle(o)),"")):"Not set up yet.";var t,o},icon:function(){return(0,Z.jsx)("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{d:"M9.79683 0.666656C4.6635 0.666656 0.463501 4.86666 0.463501 9.99999C0.463501 15.1333 4.6635 19.3333 9.79683 19.3333C14.9302 19.3333 19.1302 15.1333 19.1302 9.99999C19.1302 4.86666 14.9302 0.666656 9.79683 0.666656ZM9.79683 17.4667C5.68083 17.4667 2.33017 14.116 2.33017 9.99999C2.33017 5.88399 5.68083 2.53332 9.79683 2.53332C13.9128 2.53332 17.2635 5.88399 17.2635 9.99999C17.2635 14.116 13.9128 17.4667 9.79683 17.4667ZM10.2635 5.33332H8.8635V10.9333L13.7168 13.92L14.4635 12.7067L10.2635 10.1867V5.33332Z"})})},edit:function(){const{selectedStep:e}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep()})),[]);return(0,Z.jsxs)(ve.Z,{opened:!0,children:[(0,Z.jsx)(Ye,{title:"Wait for"}),(0,Z.jsxs)(Be.Z,{align:"top",children:[(0,Z.jsx)(Ue.Z,{style:{flex:"1 1 0"},children:(0,Z.jsx)(b.Z,{label:"",type:"number",placeholder:"Number",value:e.args.delay??"",onChange:t=>{const o=0===t.length||parseInt(t,10)<1?1:parseInt(t,10);(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"delay",o)}})}),(0,Z.jsx)(Ue.Z,{style:{flex:"1 1 0"},children:(0,Z.jsx)(Ge.Z,{label:"",value:e.args.delay_type??"HOURS",options:Je,onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"delay_type",t)})})]})]})}};var Xe=o(52405);function et(e){let{centered:t,variant:o,...s}=e;return(0,Z.jsx)(n.Z,{className:a()(["sidebar-primary"===o?"mailpoet-automation-button-sidebar-primary":"",t?"mailpoet-automation-button-centered":""]),variant:"sidebar-primary"===o?"primary":o,...s})}var tt=o(62668);function ot(){var e;const[t,o]=(0,p.useState)(!1),{selectedStep:s,workflowId:a,workflowSaved:r}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep(),workflowId:e(N.storeName).getWorkflowData().id,workflowSaved:e(N.storeName).getSelectedStep()})),[]),i=null==s||null===(e=s.args)||void 0===e?void 0:e.email_id,n=s.id,l=(0,p.useCallback)((async()=>{o(!0);const e=await tt.x.Ajax.post({api_version:window.mailpoet_api_version,endpoint:"newsletters",action:"create",data:{type:"automation",subject:"",options:{workflowId:a,workflowStepId:n}}});(0,Ae.dispatch)(N.storeName).updateStepArgs(n,"email_id",parseInt(e.data.id,10)),(0,Ae.dispatch)(N.storeName).save()}),[a,n]);return(0,p.useEffect)((()=>{i&&r&&(window.location.href=`admin.php?page=mailpoet-newsletter-editor&id=${i}`)}),[i,r]),(0,Z.jsx)(et,{variant:"sidebar-primary",centered:!0,icon:I.Z,onClick:l,isBusy:t,disabled:t,children:"Design email"})}function st(){return(0,Z.jsxs)("div",{className:"mailpoet-shortcode-selector",children:["You can use"," ",(0,Z.jsx)("a",{href:"https://kb.mailpoet.com/article/215-personalize-newsletter-with-shortcodes",target:"_blank",rel:"noopener noreferrer","data-beacon-article":"59d662ef042863379ddc6faa",children:"MailPoet shortcodes"})]})}var at=o(9578);function rt(e){let{currentName:t,defaultName:o,update:s}=e;return(0,Z.jsx)(j.Z,{className:"mailpoet-step-name-dropdown",contentClassName:"mailpoet-step-name-popover",position:"bottom left",renderToggle:e=>{let{isOpen:s,onToggle:a}=e;return(0,Z.jsx)(Ye,{title:t.length>0?t:o,children:(0,Z.jsx)(qe,{onClick:a,"aria-expanded":s,"aria-label":"Edit step name",children:(0,Z.jsx)(B.Z,{icon:at.Z,size:16})})})},renderContent:()=>(0,Z.jsx)(b.Z,{label:"Step name",className:"mailpoet-step-name-input",placeholder:o,value:t,onChange:s,help:"Give the automation step a name that indicates its purpose. E.g “Abandoned cart recovery”. This name will be displayed only to you and not to the clients."})})}function it(e){return(0,Z.jsx)(Xe.Z,{...e,onChange:t=>e.onChange(t.replaceAll(/(\r?\n)+/g," ")),onKeyDown:t=>{"Enter"===t.key&&t.preventDefault(),e.onKeyDown&&e.onKeyDown(t)}})}function nt(){const{selectedStep:e,selectedStepType:t}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep(),selectedStepType:e(N.storeName).getSelectedStepType()})),[]);return(0,Z.jsxs)(ve.Z,{opened:!0,children:[(0,Z.jsx)(rt,{currentName:e.args.name??"",defaultName:t.title,update:t=>{(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"name",t)}}),(0,Z.jsx)(b.Z,{label:"“From” name",placeholder:"John Doe",value:e.args.sender_name??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"sender_name",t)}),(0,Z.jsx)(b.Z,{type:"email",label:"“From” email address",placeholder:"you@domain.com",value:e.args.sender_address??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"sender_address",t)}),(0,Z.jsx)(it,{label:"Subject",placeholder:"Type in subject…",value:e.args.subject??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"subject",t),help:(0,Z.jsx)(st,{})}),(0,Z.jsx)(it,{label:"Preheader",placeholder:"Type in preheader…",value:e.args.preheader??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"preheader",t),help:(0,Z.jsx)(st,{})}),(0,Z.jsx)("div",{className:"mailpoet-automation-email-content-separator"}),(0,Z.jsx)(Ye,{title:"Email"}),e.args.email_id?(0,Z.jsxs)("div",{className:"mailpoet-automation-email-buttons",children:[(0,Z.jsx)(et,{variant:"sidebar-primary",centered:!0,href:`?page=mailpoet-newsletter-editor&id=${e.args.email_id}`,children:"Edit content"}),(0,Z.jsx)(et,{variant:"secondary",centered:!0,children:"Preview"})]}):(0,Z.jsx)(ot,{})]})}var lt=o(58897);function ct(){var e;const{selectedStep:t}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep()})),[]),o=void 0!==(null===(e=t.args)||void 0===e?void 0:e.ga_campaign),s=Ze.Hooks.applyFilters("mailpoet.automation.send_email.google_analytics_panel",(0,Z.jsx)(Pe.Z,{onRequestClose:()=>(0,Ae.dispatch)(N.storeName).updateStepArgs(t.id,"ga_campaign",void 0),children:(0,_.__)("Google Analytics tracking is not available in the free version of the MailPoet plugin.","mailpoet")}));return(0,Z.jsxs)(ve.Z,{title:"Google analytics",initialOpen:!1,children:[(0,Z.jsx)(lt.Z,{label:"Enable custom GA tracking",checked:o,onChange:e=>(0,Ae.dispatch)(N.storeName).updateStepArgs(t.id,"ga_campaign",e?"":void 0)}),o&&s]})}function dt(){const{selectedStep:e}=(0,d.Z)((e=>({selectedStep:e(N.storeName).getSelectedStep()})),[]),t=e.args.reply_to_name,o=e.args.reply_to_address,s=void 0!==t||void 0!==o;return(0,Z.jsxs)(ve.Z,{title:"Reply to",initialOpen:!1,children:[(0,Z.jsx)(lt.Z,{label:"Use different email address for getting replies to the email",checked:s,onChange:t=>{(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"reply_to_name",t?"":void 0),(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"reply_to_address",t?"":void 0)}}),s&&(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(b.Z,{label:"“Reply to” name",placeholder:"John Doe",value:t??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"reply_to_name",t)}),(0,Z.jsx)(b.Z,{type:"email",label:"“Reply to” email address",placeholder:"you@domain.com",value:o??"",onChange:t=>(0,Ae.dispatch)(N.storeName).updateStepArgs(e.id,"reply_to_address",t)})]})]})}const pt={key:"mailpoet:send-email",group:"actions",title:"Send email",description:"An email will be sent to subscriber",subtitle:e=>e.args.name??"Send email",foreground:"#996800",background:"#FCF9E8",icon:function(){return(0,Z.jsx)("svg",{viewBox:"0 0 16 12",xmlns:"http://www.w3.org/2000/svg",children:(0,Z.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.73578 1.5L8 6.01219L13.2642 1.5H2.73578ZM14.5 2.41638L8.48809 7.56944L8 7.98781L7.51191 7.56944L1.5 2.41638V10C1.5 10.2761 1.72386 10.5 2 10.5H14C14.2761 10.5 14.5 10.2761 14.5 10V2.41638ZM0 2C0 0.89543 0.89543 0 2 0H14C15.1046 0 16 0.895431 16 2V10C16 11.1046 15.1046 12 14 12H2C0.895431 12 0 11.1046 0 10V2Z"})})},edit:function(){return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(nt,{}),(0,Z.jsx)(dt,{}),(0,Z.jsx)(ct,{})]})}};var mt=(0,p.createElement)(m.Wj,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,p.createElement)(m.y$,{fillRule:"evenodd",d:"M7.25 16.437a6.5 6.5 0 1 1 9.5 0V16A2.75 2.75 0 0 0 14 13.25h-4A2.75 2.75 0 0 0 7.25 16v.437Zm1.5 1.193a6.47 6.47 0 0 0 3.25.87 6.47 6.47 0 0 0 3.25-.87V16c0-.69-.56-1.25-1.25-1.25h-4c-.69 0-1.25.56-1.25 1.25v1.63ZM4 12a8 8 0 1 1 16 0 8 8 0 0 1-16 0Zm10-2a2 2 0 1 1-4 0 2 2 0 0 1 4 0Z",clipRule:"evenodd"}));const ut={key:"mailpoet:segment:subscribed",group:"triggers",title:(0,_.__)("Someone subscribed","mailpoet"),foreground:"#2271b1",background:"#f0f6fc",description:(0,_.__)("Starts the automation when a new subscriber is added to MailPoet. Use trigger filters to filter by a specific list.","mailpoet"),subtitle:()=>(0,_.__)("Trigger","mailpoet"),icon:()=>(0,Z.jsx)("div",{style:{width:"100%",height:"100%",scale:"1.4"},children:mt}),edit:()=>(0,Z.jsx)("div",{})},ht={key:"mailpoet:wp-user-registered",group:"triggers",title:(0,_.__)("WordPress user registered","mailpoet"),foreground:"#2271b1",background:"#f0f6fc",description:(0,_.__)("Starts the automation when a new user registered in WordPress. Use trigger filters to filter by a specific user role.","mailpoet"),subtitle:()=>(0,_.__)("Trigger","mailpoet"),icon:()=>(0,Z.jsx)("div",{style:{width:"100%",height:"100%",scale:"1.12"},children:u}),edit:()=>(0,Z.jsx)("div",{})};var gt=o(53397),xt=o(34206);function vt(){const{isFullscreenActive:e,isInserterOpened:t,isSidebarOpened:o,showIconLabels:s,workflow:r}=(0,d.Z)((e=>({isFullscreenActive:e(N.storeName).isFeatureActive("fullscreenMode"),isInserterOpened:e(N.storeName).isInserterSidebarOpened(),isSidebarOpened:e(N.storeName).isSidebarOpened(),showIconLabels:e(N.storeName).isFeatureActive("showIconLabels"),workflow:e(N.storeName).getWorkflowData()})),[]),p=a()("interface-interface-skeleton",{"is-sidebar-opened":o,"show-icon-labels":s});return"trash"===r.status?(window.location.href=(0,x.f)(tt.x.urls.automationListing,{[gt.E.workflowHadBeenDeleted]:r.id}),null):(0,Z.jsx)(g.vn,{children:(0,Z.jsxs)(i.zt,{children:[(0,Z.jsx)(h.x4,{isActive:e}),(0,Z.jsx)(ce,{}),(0,Z.jsx)(Ne,{}),(0,Z.jsx)(h.v4,{className:p,drawer:e&&(0,Z.jsx)("div",{className:"edit-site-navigation-toggle",children:(0,Z.jsx)(n.Z,{className:"edit-site-navigation-toggle__button has-icon",href:"admin.php?page=mailpoet-automation",children:(0,Z.jsx)(l.Z,{size:36,icon:u})})}),header:(0,Z.jsx)(z,{showInserterToggle:!1}),content:(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(ue,{}),(0,Z.jsx)(ze,{})]}),sidebar:(0,Z.jsx)(h.Vi.Slot,{scope:N.storeName}),secondarySidebar:null}),(0,Z.jsx)(c.Z.Slot,{})]})})}window.addEventListener("DOMContentLoaded",(()=>{(0,N.createStore)();const e=document.getElementById("mailpoet_automation_editor");e&&(xt.default.use((async(e,t)=>{try{return await t(e)}catch(e){var o;const t=e,s=null===(o=t.data)||void 0===o?void 0:o.status;if(s&&s>=400&&s<500){const e=t.message;return void(0,Ae.dispatch)(me.h).createErrorNotice(e??(0,_.__)("An unknown error occurred.","mailpoet"),{explicitDismiss:!0})}throw(0,Ae.dispatch)(me.h).createErrorNotice((0,_.__)("An unknown error occurred.","mailpoet"),{explicitDismiss:!0}),e}})),(0,$e.qN)(),(0,N.registerStepType)(Qe),(0,N.registerStepType)(pt),(0,N.registerStepType)(ht),(0,N.registerStepType)(ut),r.render((0,Z.jsx)(vt,{}),e))}))},65311:function(e){e.exports=jQuery}},function(e){e.O(0,[351],(function(){return 2167,e(e.s=2167)})),e.O()}]);